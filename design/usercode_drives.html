<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usercode Drives &mdash; Astoria 0.10.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Metadatas" href="metadata.html" />
    <link rel="prev" title="Inter-Process Communication" href="ipc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Astoria
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="history.html">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Design Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipc.html">Inter-Process Communication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usercode Drives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#entrypoint">Entrypoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#robot-settings-file">Robot Settings File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#entrypoint-setting">Entrypoint Setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wifi-settings">WiFi Settings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadatas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/index.html">Implementation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Astoria</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Design</a> &raquo;</li>
      <li>Usercode Drives</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/design/usercode_drives.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usercode-drives">
<h1>Usercode Drives<a class="headerlink" href="#usercode-drives" title="Permalink to this headline"></a></h1>
<p>A usercode drive is a USB mass storage device containing a Python file, usually <code class="docutils literal notranslate"><span class="pre">robot.py</span></code>.</p>
<section id="entrypoint">
<h2>Entrypoint<a class="headerlink" href="#entrypoint" title="Permalink to this headline"></a></h2>
<p>The entrypoint to the Python code is usually <code class="docutils literal notranslate"><span class="pre">robot.py</span></code>. However, this can be configured in <code class="docutils literal notranslate"><span class="pre">astoria.toml</span></code>.</p>
<p>The entrypoint is executed in a subprocess in unbuffered mode, usually <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-u</span> <span class="pre">robot.py</span></code>.</p>
<p>You can change the entrypoint in the robot settings file.</p>
</section>
<section id="robot-settings-file">
<h2>Robot Settings File<a class="headerlink" href="#robot-settings-file" title="Permalink to this headline"></a></h2>
<p>A usercode drive can also contain a <code class="docutils literal notranslate"><span class="pre">robot-settings.toml</span></code> file, which can be used by the user to configure their robot.</p>
<p>If the settings file does not already exist, it will be automatically created.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The settings file will be ignored if the USB does not contain a code bundle.</p>
</div>
<div class="highlight-TOML notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example Robot Settings File</span><span class="w"></span>

<span class="n">team_tla</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ABC1&quot;</span><span class="w"></span>
<span class="n">wifi_psk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;kgiwtnnmdfnd&quot;</span><span class="w"></span>
<span class="n">wifi_region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GB&quot;</span><span class="w"></span>
<span class="n">wifi_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
</pre></div>
</div>
<section id="entrypoint-setting">
<h3>Entrypoint Setting<a class="headerlink" href="#entrypoint-setting" title="Permalink to this headline"></a></h3>
<p>You can override the entrypoint in the settings file by changing the value of <code class="docutils literal notranslate"><span class="pre">usercode_entrypoint</span></code>.</p>
</section>
<section id="wifi-settings">
<h3>WiFi Settings<a class="headerlink" href="#wifi-settings" title="Permalink to this headline"></a></h3>
<p>The settings file controls the WiFi network broadcast by the kit.
It contains information such as credentials and region. Region is required for compliance regions and
should be specified in accordance with [ISO-3166-1 Standard and must be in ALPHA-2 format](<a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166-2#Current_codes">https://en.wikipedia.org/wiki/ISO_3166-2#Current_codes</a>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wifi_enabled</span></code> key should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the majority of cases, and will be overridden to <code class="docutils literal notranslate"><span class="pre">false</span></code>
using the standard metadata mechanisms, i.e the competition USB contains a <code class="docutils literal notranslate"><span class="pre">wifi_enabled</span></code> key too.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ipc.html" class="btn btn-neutral float-left" title="Inter-Process Communication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="metadata.html" class="btn btn-neutral float-right" title="Metadatas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-21, Dan Trickey.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>