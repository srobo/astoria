Search.setIndex({"docnames": ["design/history", "design/index", "design/ipc", "design/metadata", "design/requirements", "design/usercode_drives", "development/index", "implementation/consumers/astctl", "implementation/consumers/index", "implementation/data_components", "implementation/disk_types", "implementation/index", "implementation/managers/astdiskd", "implementation/managers/astmetad", "implementation/managers/astprocd", "implementation/managers/astwifid", "implementation/managers/index", "index", "usage"], "filenames": ["design/history.rst", "design/index.rst", "design/ipc.rst", "design/metadata.rst", "design/requirements.rst", "design/usercode_drives.rst", "development/index.rst", "implementation/consumers/astctl.rst", "implementation/consumers/index.rst", "implementation/data_components.rst", "implementation/disk_types.rst", "implementation/index.rst", "implementation/managers/astdiskd.rst", "implementation/managers/astmetad.rst", "implementation/managers/astprocd.rst", "implementation/managers/astwifid.rst", "implementation/managers/index.rst", "index.rst", "usage.rst"], "titles": ["Background", "Design", "Inter-Process Communication", "Metadatas", "Design Requirements", "Usercode Drives", "Development", "Command Line Interface", "State Consumers", "Data Components", "Disk Types", "Implementation", "Astdiskd", "Astmetad", "Astprocd", "Astwifid", "State Managers", "Astoria", "Usage"], "terms": {"astoria": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 12, 13, 14, 15, 16, 18], "i": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18], "first": [0, 3, 10], "robot": [0, 2, 3, 4, 17, 18], "manag": [0, 3, 6, 8, 9, 11, 12, 13, 15, 17, 18], "system": [0, 10, 12, 15, 17], "take": [0, 10], "heavi": 0, "inspir": 0, "from": [0, 3, 6, 8, 10, 12, 13, 14, 15, 16], "": [0, 2, 10, 15, 16], "predecessor": 0, "origin": [0, 2], "equival": 0, "srv4": 0, "kit": [0, 5, 15, 17], "It": [0, 2, 5, 7, 9, 12, 14, 15, 18], "us": [0, 2, 3, 4, 5, 6, 10, 12, 15, 18], "wamp": 0, "http": [0, 5], "commun": [0, 1, 12, 17], "develop": [0, 3, 4, 15, 17], "sourcebot": 0, "simpl": [0, 6, 7], "python": [0, 4, 5, 6, 12, 18], "script": 0, "execut": [0, 5, 6, 14, 17], "an": [0, 2, 3, 4, 6, 7, 13, 18], "insert": [0, 4, 12, 13, 14], "usb": [0, 3, 4, 5, 14, 15, 17], "drive": [0, 1, 4, 10, 13, 14, 17], "also": [0, 2, 5, 6], "had": [0, 13], "partial": 0, "support": [0, 18], "instal": [0, 6, 18], "updat": [0, 4, 10, 12, 14, 15], "code": [0, 3, 4, 5, 6, 14, 15], "wa": 0, "isol": 0, "systemd": [0, 18], "nspawn": 0, "contain": [0, 1, 2, 5, 10, 17, 18], "thi": [0, 1, 2, 5, 6, 8, 10, 12, 13, 14, 15, 16, 17, 18], "onli": [0, 10, 12, 13, 14], "work": [0, 6], "robotd": 0, "hr": 0, "robocon": 0, "Not": [0, 10], "open": [0, 6], "sourc": [0, 2, 10, 12, 13, 14, 15, 18], "prototyp": 0, "dbu": [0, 6, 12, 18], "all": [0, 2, 3, 6, 18], "comm": 0, "A": [0, 2, 3, 5, 6, 8, 9, 10, 12, 14, 16, 18], "port": [0, 6, 18], "start": [0, 3, 4, 14, 15], "superced": 0, "less": 0, "modular": [0, 4], "section": 1, "high": [1, 13, 18], "level": 1, "overview": 1, "background": [1, 17], "requir": [1, 5, 6, 8, 15, 17], "inter": [1, 17], "process": [1, 15, 16, 17, 18], "usercod": [1, 10, 15, 17, 18], "metadata": [1, 4, 5, 10, 15, 17], "ipc": [2, 12, 13, 14, 15, 16], "data": [2, 3, 4, 8, 10, 11, 16, 17, 18], "between": [2, 9], "compon": [2, 4, 10, 11, 12, 14, 15, 16, 17, 18], "exchang": 2, "inform": [2, 5, 7, 8, 12, 13, 14, 15, 17, 18], "json": [2, 18], "over": [2, 4, 12], "mqtt": [2, 6, 9, 16, 18], "pub": 2, "sub": 2, "protocol": [2, 4], "should": [2, 3, 5, 6, 7, 8, 10, 12, 14, 16, 18], "conform": [2, 3], "defin": [2, 3, 14], "schema": [2, 3, 4, 13], "reject": 2, "receiv": [2, 4, 12, 14, 15], "doe": [2, 5, 6, 8, 10], "broker": [2, 6, 9, 18], "need": [2, 6, 8, 12, 18], "run": [2, 3, 4, 9, 13, 14, 15, 16, 17], "facili": 2, "listen": [2, 12], "both": [2, 10], "tcp": 2, "websocket": [2, 6], "so": [2, 14, 16], "web": [2, 4], "ui": [2, 4], "can": [2, 3, 4, 5, 6, 8, 9, 10, 13, 14, 16, 17, 18], "without": [2, 7, 15], "addit": [2, 13, 14], "proxi": 2, "middl": 2, "The": [2, 3, 4, 5, 6, 9, 10, 14, 17, 18], "retain": 2, "flag": 2, "avail": [2, 10, 14, 16, 18], "immedi": 2, "after": [2, 9, 15], "subscrib": [2, 8, 16], "topic": 2, "mean": [2, 4], "do": [2, 6, 13, 18], "wait": [2, 13, 14, 16], "next": [2, 12], "public": [2, 6], "ani": [2, 3, 8, 9, 12, 13, 14, 15, 16, 18], "There": [2, 13, 18], "ar": [2, 3, 4, 6, 10, 12, 13, 14, 15, 16, 18], "current": [2, 3, 6, 12, 15], "three": 2, "class": [2, 11, 16], "about": [2, 12, 18], "statu": [2, 4, 12, 13, 14, 15, 16], "state": [2, 3, 7, 9, 11, 12, 13, 14, 17, 18], "publish": [2, 8, 12, 13, 14, 15, 16], "manager_nam": 2, "base": [2, 4, 13, 15, 18], "managermessag": [2, 16], "must": [2, 3, 5, 6, 8, 9, 10, 16], "least": [2, 18], "astoria_vers": [2, 13], "version": [2, 13], "stop": [2, 14, 15, 16], "allow": [2, 4, 10, 15, 16], "disallow": 2, "depend": [2, 4, 6, 11, 14], "ensur": [2, 6, 10, 12, 14, 16], "last": [2, 3, 10], "testament": 2, "client": 2, "chang": [2, 5, 6, 12, 14, 15, 16], "alert": 2, "disconnect": [2, 9], "clear": 2, "safe": [2, 12, 14, 16], "sent": 2, "singl": 2, "specif": [2, 3, 14], "action": [2, 10], "managerrequest": 2, "uuid": [2, 12, 14], "uniqu": 2, "relat": 2, "repli": 2, "requestrespons": [2, 14], "respons": [2, 10, 12, 13, 14, 15], "match": [2, 10, 14, 15], "mutat": [2, 8, 14, 16], "common": [2, 3, 9, 10, 12, 13, 14, 15, 16], "definit": [2, 11], "sender_nam": 2, "str": [2, 3, 10, 12, 13, 15, 16], "final": 2, "reason": 2, "success": 2, "bool": [2, 10, 13, 15, 16], "signifi": 2, "occur": [2, 6], "broadcastev": 2, "broadcast_ev": 2, "event_nam": 2, "multipl": [2, 14], "same": [2, 18], "simultan": 2, "everi": [2, 7, 9], "have": [2, 3, 4, 6, 10, 17, 18], "identifi": 2, "its": [2, 13, 16], "purpos": 2, "prioriti": [2, 3, 13, 18], "compen": 2, "broadcasthelp": 2, "introduc": 3, "concept": 3, "here": [3, 6], "technic": 3, "term": 3, "set": [3, 4, 13, 15, 17], "mutabl": 3, "immut": 3, "environ": [3, 6], "exampl": [3, 5, 18], "includ": [3, 6], "zone": [3, 13, 18], "mode": [3, 4, 5, 6, 13, 15, 18], "indic": [3, 13], "astmetad": [3, 11, 14, 15, 16, 18], "which": [3, 5, 10], "resolv": [3, 13], "dure": 3, "runtim": 3, "overlai": 3, "number": [3, 6, 10], "attribut": 3, "present": [3, 10], "even": [3, 14], "valu": [3, 5, 10, 13, 14], "none": [3, 12, 13, 14, 15, 16], "overlaid": 3, "order": [3, 10], "highest": 3, "overrid": [3, 5, 18], "lower": 3, "For": [3, 7, 17, 18], "initi": [3, 13], "gener": [3, 6, 15, 17], "foo": 3, "1": [3, 5, 18], "bar": 3, "2": [3, 5, 12, 18], "bee": 3, "hive": 3, "3": [3, 6, 18], "second": [3, 10, 14], "0": 3, "wasp": 3, "type": [3, 11, 12, 13, 14, 15, 16, 17], "dict": [3, 12, 13], "where": [3, 4], "kei": [3, 5], "name": [3, 10, 12, 14, 16], "attr": 3, "overridden": [3, 5], "cannot": 3, "dynam": [3, 15], "regist": 3, "abl": 3, "No": [3, 10], "arbitrarili": 3, "spuriou": [3, 10], "effect": 3, "give": [3, 12], "warn": 3, "though": 3, "implement": [3, 4, 7, 10, 14, 17], "follow": [4, 6, 13, 14], "were": 4, "out": 4, "student": [4, 17], "when": [4, 10, 12, 13, 14, 16], "handl": [4, 9, 14, 15], "arena": [4, 13, 18], "herein": 4, "refer": [4, 18], "make": [4, 6, 8, 14], "possibl": [4, 14, 18], "softwar": [4, 13], "deliv": 4, "provid": [4, 7, 15], "programmat": [4, 10], "interfac": [4, 6, 8, 11, 15, 18], "control": [4, 5], "These": [4, 15], "abov": [4, 14], "mvp": 4, "aim": 4, "too": [4, 5], "abil": 4, "workaround": 4, "plod": 4, "bug": 4, "remot": 4, "mechan": [4, 5], "futur": 4, "live": 4, "stream": 4, "usag": [4, 7, 17], "led": 4, "sb": 4, "power": 4, "hat": 4, "style": [4, 13], "command": [4, 6, 8, 11, 16, 17], "line": [4, 8, 11, 13, 17], "enabl": [4, 13], "disabl": 4, "wireless": 4, "we": [4, 6, 12], "competit": [4, 5], "been": 4, "incorpor": 4, "solut": 4, "poll": 4, "loop": [4, 9, 16], "asynchron": 4, "callback": [4, 11], "off": 4, "shelf": 4, "standard": [4, 5, 6], "e": [4, 5], "g": 4, "pydant": [4, 13], "avoid": 4, "complex": 4, "integr": [4, 6], "written": 4, "other": [4, 10, 12, 14, 15, 16, 18], "languag": 4, "than": 4, "j": 4, "t": 4, "mass": 5, "storag": 5, "devic": 5, "usual": 5, "py": [5, 6, 18], "howev": 5, "configur": [5, 13, 15, 17], "toml": [5, 18], "subprocess": [5, 14, 15], "unbuff": 5, "python3": [5, 6], "u": [5, 10, 12, 14], "you": [5, 6, 18], "user": [5, 18], "If": [5, 6, 8, 15, 18], "alreadi": [5, 14], "exist": [5, 6, 10, 14, 16], "automat": [5, 12, 15], "creat": [5, 10, 15], "ignor": [5, 13, 14], "bundl": [5, 15], "team_tla": 5, "abc1": 5, "wifi_psk": [5, 13], "kgiwtnnmdfnd": 5, "wifi_region": [5, 13], "gb": 5, "wifi_en": [5, 13, 15, 18], "true": [5, 10, 13, 15, 16, 18], "usercode_entrypoint": [5, 13], "network": [5, 15], "broadcast": 5, "credenti": [5, 15], "region": [5, 15], "complianc": 5, "specifi": [5, 18], "accord": 5, "iso": 5, "3166": 5, "alpha": 5, "format": [5, 18], "en": 5, "wikipedia": 5, "org": [5, 12], "wiki": 5, "iso_3166": 5, "current_cod": 5, "major": 5, "case": [5, 14], "fals": [5, 10, 15, 18], "github": 6, "pull": 6, "request": [6, 8, 14], "submit": 6, "write": [6, 14], "access": [6, 15], "repositori": 6, "option": [6, 13, 16, 18], "your": 6, "branch": 6, "within": [6, 14], "main": [6, 12, 14, 16], "altern": 6, "pleas": [6, 7, 13, 17], "fork": 6, "someth": 6, "ha": [6, 13], "issu": 6, "assign": 6, "yourself": 6, "duplic": 6, "accident": 6, "help": 6, "git": 6, "some": [6, 10, 16], "good": [6, 18], "tutori": 6, "resourc": 6, "guid": 6, "learn": 6, "atlassian": 6, "machin": 6, "6": [6, 18], "higher": 6, "pip": 6, "packag": [6, 18], "gnu": 6, "poetri": 6, "udisks2": [6, 12], "udiski": [6, 12, 18], "astdiskd": [6, 10, 11, 13, 14, 16, 18], "mosquitto": [6, 18], "although": [6, 18], "local": 6, "graphviz": 6, "build": 6, "sphinx": 6, "now": 6, "clone": 6, "folder": 6, "insid": 6, "tell": 6, "dev": [6, 13], "enter": 6, "virtual": 6, "shell": 6, "id": 6, "choic": 6, "cover": 6, "perform": 6, "manual": 6, "one": [6, 10, 13, 14], "pytest": 6, "coverag": 6, "our": 6, "suit": 6, "wish": 6, "view": 6, "html": 6, "output": 6, "find": [6, 10], "statement": 6, "cov": 6, "flake8": 6, "extens": 6, "meet": 6, "pep": 6, "8": 6, "linter": 6, "mypi": 6, "project": [6, 17], "found": [6, 10], "doc": 6, "serv": 6, "dockerfil": 6, "compos": 6, "yml": 6, "oper": [6, 15, 18], "applic": [6, 9, 16], "f": 6, "expos": 6, "host": [6, 15, 18], "1883": [6, 18], "9001": 6, "astctl": 7, "mainli": 7, "intend": 7, "debug": [7, 12], "inspect": 7, "see": [7, 13, 17, 18], "individu": [7, 10], "consum": [7, 9, 11, 16, 17], "enough": 7, "understand": 7, "detail": 7, "document": [7, 18], "program": [8, 12, 16, 18], "persist": 8, "hold": 8, "anoth": [8, 12], "entiti": 8, "function": [8, 9], "upgrad": 8, "repres": 9, "connect": 9, "event": 9, "standalon": 9, "entrypoint": [9, 10, 12, 16], "superclass": 9, "call": [9, 14, 18], "variou": 9, "method": 9, "differ": 9, "stage": 9, "overriden": 9, "customis": 9, "behaviour": 9, "_pre_connect": 9, "befor": 9, "_post_connect": 9, "_pre_disconnect": 9, "_post_disconnect": 9, "whilst": [10, 16], "detect": 10, "what": 10, "attach": 10, "each": [10, 12], "determin": 10, "relev": 10, "sort": 10, "few": 10, "member": 10, "disktyp": [10, 12], "given": [10, 13], "mount": [10, 12, 18], "path": [10, 12, 14, 16, 18], "disktypecalcul": 10, "compar": 10, "against": 10, "return": [10, 12, 13, 14, 15, 16], "As": [10, 12, 13], "alwai": 10, "list": [10, 12, 17, 18], "noaction": 10, "trueconstraint": 10, "constaint": 10, "andconstraint": 10, "paramet": [10, 12], "constructor": 10, "combin": 10, "full": 10, "along": 10, "default_usercode_entrypoint": [10, 12, 18], "helper": 10, "calcul": [10, 12, 14], "reli": [10, 12, 14, 16], "itself": 10, "__init__": [10, 15], "initialis": [10, 13], "default": [10, 12, 18], "config": [10, 12, 13, 16, 18], "abstract": 10, "point": [10, 15], "filepresentconstraint": 10, "filenam": 10, "file": [10, 15, 16, 17, 18], "check": [10, 13, 15], "numberoffilesconstraint": 10, "n": 10, "certain": 10, "int": [10, 13, 14], "orconstraint": 10, "b": 10, "either": 10, "notconstraint": 10, "negat": 10, "_": 10, "falseconstraint": 10, "astprocd": [11, 16, 18], "astwifid": [11, 16], "minim": 11, "disk": [11, 12, 14, 17, 18], "identif": [11, 18], "constraint": 11, "newli": 12, "remov": [12, 14], "udisk": [12, 18], "volum": 12, "On": 12, "startup": 12, "read": [12, 13], "object": 12, "freedesktop": 12, "block_devic": 12, "job": 12, "signal": 12, "dispatch": 12, "task": [12, 14], "filesystem": 12, "cleanup": 12, "notic": 12, "them": 12, "recommend": [12, 18], "dfeet": 12, "observ": 12, "interact": [12, 18], "pure": 12, "librari": [12, 18], "diskmanag": 12, "verbos": [12, 14, 16], "config_fil": [12, 14, 16], "async": [12, 14, 15, 16], "routin": [12, 14, 16], "properti": [12, 14, 15, 16], "offline_statu": [12, 14, 16], "diskmanagermessag": 12, "goe": [12, 14, 16], "offlin": [12, 14, 16], "go": [12, 14, 16], "update_st": 12, "struct": 12, "diskuuid": 12, "alia": 12, "diskinfo": [12, 14], "disk_typ": 12, "mount_path": 12, "messag": [12, 13, 14, 15], "calculate_disk_info": 12, "info": [12, 13, 14], "newtyp": 12, "dictionari": [12, 13], "distribut": 13, "more": [13, 17], "time": [13, 14], "onc": [13, 18], "load": 13, "valid": 13, "ad": 13, "metadatamanagermessag": 13, "pass": [13, 16], "templat": 13, "engin": 13, "log": [13, 14, 16], "add": 13, "nest": 13, "field": 13, "validate_assign": 13, "arch": 13, "game_timeout": [13, 18], "classmethod": 13, "get_macos_release_info": 13, "get": 13, "releas": [13, 17], "maco": 13, "o": 13, "get_os_release_info": 13, "os_release_path": 13, "posixpath": 13, "etc": 13, "man": 13, "page": [13, 18], "5": [13, 14], "rtype": 13, "get_os_version_info": 13, "init": 13, "popul": 13, "is_wifi_valid": 13, "wifi": [13, 15, 18], "turn": 13, "param": 13, "boolean": 13, "whether": 13, "kernel_vers": 13, "libc_ver": 13, "marker_offset": 13, "robotmod": 13, "os_nam": 13, "os_pretty_nam": 13, "os_vers": 13, "python_vers": 13, "wifi_ssid": 13, "daemon": [13, 16], "comp": [13, 18], "real": 14, "To": 14, "new": 14, "code_statu": 14, "codestatu": 14, "progress": 14, "via": [14, 15], "restart": [14, 15], "diagram": 14, "trigger": 14, "child": [14, 15], "asyncio": [14, 15, 16], "modul": [14, 15], "logger": [14, 16], "captur": 14, "stderr": 14, "stdout": 14, "locat": [14, 18], "sigchld": 14, "temporari": 14, "directori": [14, 18], "clean": 14, "up": [14, 15, 17], "kill": [14, 15], "manifest": 14, "neg": 14, "send": 14, "sigterm": 14, "sigkil": 14, "still": 14, "crash": 14, "code_crash": 14, "finish": 14, "code_finish": 14, "code_kil": 14, "code_run": 14, "code_start": 14, "processmanagermessag": 14, "disk_info": 14, "pid": 14, "processmanag": 14, "handle_astmetad_messag": 14, "payload": 14, "handle_disk_insert": 14, "handle_disk_remov": 14, "handle_kill_request": 14, "handle_restart_request": 14, "update_statu": 14, "ap": 15, "while": 15, "cach": 15, "come": 15, "presenc": 15, "dhcp": 15, "hostapd": 15, "hotspot": 15, "store": [15, 16, 18], "tmp": 15, "launch": 15, "ref": 15, "ssid": 15, "psk": 15, "wifimanagermessag": 15, "hotspot_run": 15, "wifihotspotlifecycl": 15, "bridg": [15, 18], "enable_wpa3": [15, 18], "lifecycl": 15, "hostapd_binari": 15, "generate_hostapd_config": 15, "has_metadata_chang": 15, "run_hotspot": 15, "stop_hotspot": 15, "becom": 16, "test": [16, 17, 18], "import": 16, "click": 16, "statemanag": 16, "getlogg": 16, "__name__": 16, "get_event_loop": 16, "asttestd": 16, "v": 16, "is_flag": 16, "c": [16, 18], "def": 16, "testd": 16, "testmanag": 16, "run_until_complet": 16, "_init": 16, "self": 16, "await": 16, "wait_loop": 16, "__main__": 16, "2022": 17, "under": 17, "mit": 17, "licenc": 17, "licens": 17, "contributor": 17, "gen": 17, "peopl": 17, "who": 17, "design": [17, 18], "docker": 17, "deploi": 18, "tradit": 18, "keyboard": 18, "mous": 18, "describ": 18, "debian": 18, "buster": 18, "made": 18, "linux": 18, "automount": 18, "long": 18, "thei": 18, "compat": 18, "later": 18, "target": 18, "os": 18, "mai": 18, "posix": 18, "look": 18, "enable_tl": 18, "force_protocol_version_3_1": 18, "topic_prefix": 18, "wlan0": 18, "br0": 18, "ignored_mount": 18, "boot": 18, "efi": 18, "cache_dir": 18, "var": 18, "product": 18, "env": 18, "example_env_var": 18, "123": 18, "setup": 18, "proper": 18, "deploy": 18, "outsid": 18, "scope": 18, "tmux": 18, "util": 18, "arg": 18, "static": 18, "ideal": 18, "zip": 18, "place": 18, "recognis": 18, "explan": 18, "120": 18}, "objects": {"astoria.astdiskd": [[12, 0, 1, "", "DiskManager"]], "astoria.astdiskd.DiskManager": [[12, 1, 1, "", "main"], [12, 2, 1, "", "name"], [12, 3, 1, "", "offline_status"], [12, 1, 1, "", "update_state"]], "astoria.astprocd": [[14, 0, 1, "", "ProcessManager"]], "astoria.astprocd.ProcessManager": [[14, 2, 1, "", "dependencies"], [14, 1, 1, "", "handle_astmetad_message"], [14, 1, 1, "", "handle_disk_insertion"], [14, 1, 1, "", "handle_disk_removal"], [14, 1, 1, "", "handle_kill_request"], [14, 1, 1, "", "handle_restart_request"], [14, 1, 1, "", "main"], [14, 2, 1, "", "name"], [14, 3, 1, "", "offline_status"], [14, 1, 1, "", "update_status"]], "astoria.astwifid": [[15, 0, 1, "", "WiFiHotspotLifeCycle"]], "astoria.astwifid.WiFiHotspotLifeCycle": [[15, 2, 1, "", "HOSTAPD_BINARY"], [15, 1, 1, "", "__init__"], [15, 1, 1, "", "generate_hostapd_config"], [15, 1, 1, "", "has_metadata_changed"], [15, 1, 1, "", "run_hotspot"], [15, 1, 1, "", "stop_hotspot"]], "astoria.common.code_status": [[14, 0, 1, "", "CodeStatus"]], "astoria.common.code_status.CodeStatus": [[14, 2, 1, "", "CRASHED"], [14, 2, 1, "", "FINISHED"], [14, 2, 1, "", "KILLED"], [14, 2, 1, "", "RUNNING"], [14, 2, 1, "", "STARTING"]], "astoria.common.disks": [[12, 0, 1, "", "DiskInfo"], [10, 0, 1, "", "DiskType"], [10, 0, 1, "", "DiskTypeCalculator"]], "astoria.common.disks.DiskInfo": [[12, 2, 1, "", "disk_type"], [12, 2, 1, "", "mount_path"], [12, 2, 1, "", "uuid"]], "astoria.common.disks.DiskType": [[10, 2, 1, "", "METADATA"], [10, 2, 1, "", "NOACTION"], [10, 2, 1, "", "USERCODE"]], "astoria.common.disks.DiskTypeCalculator": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "calculate"]], "astoria.common.disks.constraints": [[10, 0, 1, "", "AndConstraint"], [10, 0, 1, "", "Constraint"], [10, 0, 1, "", "FalseConstraint"], [10, 0, 1, "", "FilePresentConstraint"], [10, 0, 1, "", "NotConstraint"], [10, 0, 1, "", "NumberOfFilesConstraint"], [10, 0, 1, "", "OrConstraint"], [10, 0, 1, "", "TrueConstraint"]], "astoria.common.disks.constraints.AndConstraint": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.Constraint": [[10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.FalseConstraint": [[10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.FilePresentConstraint": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.NotConstraint": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.NumberOfFilesConstraint": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.OrConstraint": [[10, 1, 1, "", "__init__"], [10, 1, 1, "", "matches"]], "astoria.common.disks.constraints.TrueConstraint": [[10, 1, 1, "", "matches"]], "astoria.common.disks.structs": [[12, 0, 1, "", "DiskUUID"]], "astoria.common.ipc": [[12, 0, 1, "", "DiskManagerMessage"], [2, 0, 1, "", "ManagerRequest"], [13, 0, 1, "", "MetadataManagerMessage"], [14, 0, 1, "", "ProcessManagerMessage"], [2, 0, 1, "", "RequestResponse"], [15, 0, 1, "", "WiFiManagerMessage"]], "astoria.common.ipc.DiskManagerMessage": [[12, 1, 1, "", "calculate_disk_info"], [12, 2, 1, "", "disks"]], "astoria.common.ipc.ManagerRequest": [[2, 2, 1, "", "sender_name"], [2, 2, 1, "", "uuid"]], "astoria.common.ipc.MetadataManagerMessage": [[13, 2, 1, "", "metadata"]], "astoria.common.ipc.ProcessManagerMessage": [[14, 2, 1, "", "code_status"], [14, 2, 1, "", "disk_info"], [14, 2, 1, "", "pid"]], "astoria.common.ipc.RequestResponse": [[2, 2, 1, "", "reason"], [2, 2, 1, "", "success"], [2, 2, 1, "", "uuid"]], "astoria.common.ipc.WiFiManagerMessage": [[15, 2, 1, "", "hotspot_running"]], "astoria.common.metadata": [[13, 0, 1, "", "Metadata"], [13, 0, 1, "", "RobotMode"]], "astoria.common.metadata.Metadata": [[13, 0, 1, "", "Config"], [13, 2, 1, "", "arch"], [13, 2, 1, "", "arena"], [13, 2, 1, "", "astoria_version"], [13, 2, 1, "", "game_timeout"], [13, 1, 1, "", "get_macos_release_info"], [13, 1, 1, "", "get_os_release_info"], [13, 1, 1, "", "get_os_version_info"], [13, 1, 1, "", "init"], [13, 1, 1, "", "is_wifi_valid"], [13, 2, 1, "", "kernel_version"], [13, 2, 1, "", "libc_ver"], [13, 2, 1, "", "marker_offset"], [13, 2, 1, "", "mode"], [13, 2, 1, "", "os_name"], [13, 2, 1, "", "os_pretty_name"], [13, 2, 1, "", "os_version"], [13, 2, 1, "", "python_version"], [13, 2, 1, "", "usercode_entrypoint"], [13, 2, 1, "", "wifi_enabled"], [13, 2, 1, "", "wifi_psk"], [13, 2, 1, "", "wifi_region"], [13, 2, 1, "", "wifi_ssid"], [13, 2, 1, "", "zone"]], "astoria.common.metadata.Metadata.Config": [[13, 2, 1, "", "validate_assignment"]], "astoria.common.metadata.RobotMode": [[13, 2, 1, "", "COMP"], [13, 2, 1, "", "DEV"]]}, "objtypes": {"0": "py:class", "1": "py:method", "2": "py:attribute", "3": "py:property"}, "objnames": {"0": ["py", "class", "Python class"], "1": ["py", "method", "Python method"], "2": ["py", "attribute", "Python attribute"], "3": ["py", "property", "Python property"]}, "titleterms": {"background": 0, "herdsman": 0, "runusb": 0, "shepherd": 0, "pepper2": 0, "design": [1, 4], "content": [1, 11], "inter": 2, "process": [2, 14], "commun": 2, "messag": 2, "type": [2, 6, 10], "manag": [2, 14, 16], "request": 2, "broadcast": 2, "event": 2, "metadata": [3, 13, 18], "resolut": 3, "sourc": 3, "requir": [4, 18], "minimum": 4, "addit": 4, "technic": 4, "usercod": [5, 14], "drive": [5, 12], "entrypoint": 5, "robot": 5, "set": [5, 6], "file": 5, "wifi": 5, "develop": 6, "up": 6, "test": 6, "unit": 6, "lint": 6, "static": 6, "check": 6, "document": [6, 17], "run": [6, 18], "docker": 6, "command": [7, 18], "line": [7, 18], "interfac": 7, "state": [8, 16], "consum": 8, "list": [8, 16], "data": [9, 12, 13, 14, 15], "compon": 9, "callback": 9, "disk": [10, 13], "identif": 10, "constraint": 10, "class": [10, 12, 13, 14, 15], "definit": 10, "implement": 11, "astdiskd": 12, "detect": 12, "structur": [12, 13, 14, 15], "astmetad": 13, "lifecycl": [13, 14], "astprocd": 14, "astwifid": 15, "depend": 16, "minim": 16, "astoria": 17, "contribut": 17, "usag": 18, "system": 18, "configur": 18, "astctl": 18, "usb": 18}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"Background": [[0, "background"]], "Herdsman": [[0, "herdsman"]], "runusb": [[0, "runusb"]], "Shepherd": [[0, "shepherd"]], "pepper2": [[0, "pepper2"]], "Design": [[1, "design"]], "Contents:": [[1, null], [11, null]], "Inter-Process Communication": [[2, "inter-process-communication"]], "Communications": [[2, "communications"]], "Message Types": [[2, "message-types"]], "Manager Messages": [[2, "manager-messages"]], "Manager Requests": [[2, "manager-requests"]], "Broadcast Events": [[2, "broadcast-events"]], "Metadatas": [[3, "metadatas"]], "Metadata Resolution": [[3, "metadata-resolution"]], "Metadata Source": [[3, "metadata-source"]], "Design Requirements": [[4, "design-requirements"]], "Minimum": [[4, "minimum"]], "Additional": [[4, "additional"]], "Technical": [[4, "technical"]], "Usercode Drives": [[5, "usercode-drives"]], "Entrypoint": [[5, "entrypoint"]], "Robot Settings File": [[5, "robot-settings-file"]], "Entrypoint Setting": [[5, "entrypoint-setting"]], "WiFi Settings": [[5, "wifi-settings"]], "Development": [[6, "development"]], "Setting Up": [[6, "setting-up"]], "Testing": [[6, "testing"]], "Unit Testing": [[6, "unit-testing"]], "Linting": [[6, "linting"]], "Static Type Checking": [[6, "static-type-checking"]], "Documentation": [[6, "documentation"]], "Running in Docker": [[6, "running-in-docker"]], "Command Line Interface": [[7, "command-line-interface"]], "State Consumers": [[8, "state-consumers"]], "List of State Consumers:": [[8, null]], "Data Components": [[9, "data-components"]], "Callbacks": [[9, "callbacks"]], "Disk Types": [[10, "disk-types"]], "Disk Identification": [[10, "disk-identification"]], "Constraints": [[10, "constraints"]], "Disk Type Classes": [[10, "disk-type-classes"]], "Constraint Definitions": [[10, "constraint-definitions"]], "Implementation": [[11, "implementation"]], "Astdiskd": [[12, "astdiskd"]], "Drive Detection": [[12, "drive-detection"]], "Astdiskd Data Structures and Classes": [[12, "astdiskd-data-structures-and-classes"]], "Astmetad": [[13, "astmetad"]], "Metadata Disk Lifecycle": [[13, "metadata-disk-lifecycle"]], "Astmetad Data Structures and Classes": [[13, "astmetad-data-structures-and-classes"]], "Astprocd": [[14, "astprocd"]], "Usercode Lifecycle": [[14, "usercode-lifecycle"]], "Usercode Process Management": [[14, "usercode-process-management"]], "Astprocd Data Structures and Classes": [[14, "astprocd-data-structures-and-classes"]], "Astwifid": [[15, "astwifid"]], "Astwifid Data Structures and Classes": [[15, "astwifid-data-structures-and-classes"]], "State Managers": [[16, "state-managers"]], "List of State Managers:": [[16, null]], "Manager Dependencies": [[16, "manager-dependencies"]], "Minimal State Manager": [[16, "minimal-state-manager"]], "Astoria": [[17, "astoria"]], "Contributions": [[17, "contributions"]], "Documentation:": [[17, null]], "Usage": [[18, "usage"]], "System Requirements": [[18, "system-requirements"]], "Configuration": [[18, "configuration"]], "Running": [[18, "running"]], "Command Line Usage": [[18, "command-line-usage"]], "astctl": [[18, "astctl"]], "Metadata USBs": [[18, "metadata-usbs"]]}, "indexentries": {"managerrequest (class in astoria.common.ipc)": [[2, "astoria.common.ipc.ManagerRequest"]], "requestresponse (class in astoria.common.ipc)": [[2, "astoria.common.ipc.RequestResponse"]], "reason (astoria.common.ipc.requestresponse attribute)": [[2, "astoria.common.ipc.RequestResponse.reason"]], "sender_name (astoria.common.ipc.managerrequest attribute)": [[2, "astoria.common.ipc.ManagerRequest.sender_name"]], "success (astoria.common.ipc.requestresponse attribute)": [[2, "astoria.common.ipc.RequestResponse.success"]], "uuid (astoria.common.ipc.managerrequest attribute)": [[2, "astoria.common.ipc.ManagerRequest.uuid"]], "uuid (astoria.common.ipc.requestresponse attribute)": [[2, "astoria.common.ipc.RequestResponse.uuid"]], "andconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.AndConstraint"]], "constraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.Constraint"]], "disktype (class in astoria.common.disks)": [[10, "astoria.common.disks.DiskType"]], "disktypecalculator (class in astoria.common.disks)": [[10, "astoria.common.disks.DiskTypeCalculator"]], "falseconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.FalseConstraint"]], "filepresentconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.FilePresentConstraint"]], "metadata (astoria.common.disks.disktype attribute)": [[10, "astoria.common.disks.DiskType.METADATA"]], "noaction (astoria.common.disks.disktype attribute)": [[10, "astoria.common.disks.DiskType.NOACTION"]], "notconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.NotConstraint"]], "numberoffilesconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.NumberOfFilesConstraint"]], "orconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.OrConstraint"]], "trueconstraint (class in astoria.common.disks.constraints)": [[10, "astoria.common.disks.constraints.TrueConstraint"]], "usercode (astoria.common.disks.disktype attribute)": [[10, "astoria.common.disks.DiskType.USERCODE"]], "__init__() (astoria.common.disks.disktypecalculator method)": [[10, "astoria.common.disks.DiskTypeCalculator.__init__"]], "__init__() (astoria.common.disks.constraints.andconstraint method)": [[10, "astoria.common.disks.constraints.AndConstraint.__init__"]], "__init__() (astoria.common.disks.constraints.filepresentconstraint method)": [[10, "astoria.common.disks.constraints.FilePresentConstraint.__init__"]], "__init__() (astoria.common.disks.constraints.notconstraint method)": [[10, "astoria.common.disks.constraints.NotConstraint.__init__"]], "__init__() (astoria.common.disks.constraints.numberoffilesconstraint method)": [[10, "astoria.common.disks.constraints.NumberOfFilesConstraint.__init__"]], "__init__() (astoria.common.disks.constraints.orconstraint method)": [[10, "astoria.common.disks.constraints.OrConstraint.__init__"]], "calculate() (astoria.common.disks.disktypecalculator method)": [[10, "astoria.common.disks.DiskTypeCalculator.calculate"]], "matches() (astoria.common.disks.constraints.andconstraint method)": [[10, "astoria.common.disks.constraints.AndConstraint.matches"]], "matches() (astoria.common.disks.constraints.constraint method)": [[10, "astoria.common.disks.constraints.Constraint.matches"]], "matches() (astoria.common.disks.constraints.falseconstraint method)": [[10, "astoria.common.disks.constraints.FalseConstraint.matches"]], "matches() (astoria.common.disks.constraints.filepresentconstraint method)": [[10, "astoria.common.disks.constraints.FilePresentConstraint.matches"]], "matches() (astoria.common.disks.constraints.notconstraint method)": [[10, "astoria.common.disks.constraints.NotConstraint.matches"]], "matches() (astoria.common.disks.constraints.numberoffilesconstraint method)": [[10, "astoria.common.disks.constraints.NumberOfFilesConstraint.matches"]], "matches() (astoria.common.disks.constraints.orconstraint method)": [[10, "astoria.common.disks.constraints.OrConstraint.matches"]], "matches() (astoria.common.disks.constraints.trueconstraint method)": [[10, "astoria.common.disks.constraints.TrueConstraint.matches"]], "diskinfo (class in astoria.common.disks)": [[12, "astoria.common.disks.DiskInfo"]], "diskmanager (class in astoria.astdiskd)": [[12, "astoria.astdiskd.DiskManager"]], "diskmanagermessage (class in astoria.common.ipc)": [[12, "astoria.common.ipc.DiskManagerMessage"]], "diskuuid (class in astoria.common.disks.structs)": [[12, "astoria.common.disks.structs.DiskUUID"]], "calculate_disk_info() (astoria.common.ipc.diskmanagermessage method)": [[12, "astoria.common.ipc.DiskManagerMessage.calculate_disk_info"]], "disk_type (astoria.common.disks.diskinfo attribute)": [[12, "astoria.common.disks.DiskInfo.disk_type"]], "disks (astoria.common.ipc.diskmanagermessage attribute)": [[12, "astoria.common.ipc.DiskManagerMessage.disks"]], "main() (astoria.astdiskd.diskmanager method)": [[12, "astoria.astdiskd.DiskManager.main"]], "mount_path (astoria.common.disks.diskinfo attribute)": [[12, "astoria.common.disks.DiskInfo.mount_path"]], "name (astoria.astdiskd.diskmanager attribute)": [[12, "astoria.astdiskd.DiskManager.name"]], "offline_status (astoria.astdiskd.diskmanager property)": [[12, "astoria.astdiskd.DiskManager.offline_status"]], "update_state() (astoria.astdiskd.diskmanager method)": [[12, "astoria.astdiskd.DiskManager.update_state"]], "uuid (astoria.common.disks.diskinfo attribute)": [[12, "astoria.common.disks.DiskInfo.uuid"]], "comp (astoria.common.metadata.robotmode attribute)": [[13, "astoria.common.metadata.RobotMode.COMP"]], "dev (astoria.common.metadata.robotmode attribute)": [[13, "astoria.common.metadata.RobotMode.DEV"]], "metadata (class in astoria.common.metadata)": [[13, "astoria.common.metadata.Metadata"]], "metadata.config (class in astoria.common.metadata)": [[13, "astoria.common.metadata.Metadata.Config"]], "metadatamanagermessage (class in astoria.common.ipc)": [[13, "astoria.common.ipc.MetadataManagerMessage"]], "robotmode (class in astoria.common.metadata)": [[13, "astoria.common.metadata.RobotMode"]], "arch (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.arch"]], "arena (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.arena"]], "astoria_version (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.astoria_version"]], "game_timeout (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.game_timeout"]], "get_macos_release_info() (astoria.common.metadata.metadata class method)": [[13, "astoria.common.metadata.Metadata.get_macos_release_info"]], "get_os_release_info() (astoria.common.metadata.metadata class method)": [[13, "astoria.common.metadata.Metadata.get_os_release_info"]], "get_os_version_info() (astoria.common.metadata.metadata class method)": [[13, "astoria.common.metadata.Metadata.get_os_version_info"]], "init() (astoria.common.metadata.metadata class method)": [[13, "astoria.common.metadata.Metadata.init"]], "is_wifi_valid() (astoria.common.metadata.metadata method)": [[13, "astoria.common.metadata.Metadata.is_wifi_valid"]], "kernel_version (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.kernel_version"]], "libc_ver (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.libc_ver"]], "marker_offset (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.marker_offset"]], "metadata (astoria.common.ipc.metadatamanagermessage attribute)": [[13, "astoria.common.ipc.MetadataManagerMessage.metadata"]], "mode (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.mode"]], "os_name (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.os_name"]], "os_pretty_name (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.os_pretty_name"]], "os_version (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.os_version"]], "python_version (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.python_version"]], "usercode_entrypoint (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.usercode_entrypoint"]], "validate_assignment (astoria.common.metadata.metadata.config attribute)": [[13, "astoria.common.metadata.Metadata.Config.validate_assignment"]], "wifi_enabled (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.wifi_enabled"]], "wifi_psk (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.wifi_psk"]], "wifi_region (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.wifi_region"]], "wifi_ssid (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.wifi_ssid"]], "zone (astoria.common.metadata.metadata attribute)": [[13, "astoria.common.metadata.Metadata.zone"]], "crashed (astoria.common.code_status.codestatus attribute)": [[14, "astoria.common.code_status.CodeStatus.CRASHED"]], "codestatus (class in astoria.common.code_status)": [[14, "astoria.common.code_status.CodeStatus"]], "finished (astoria.common.code_status.codestatus attribute)": [[14, "astoria.common.code_status.CodeStatus.FINISHED"]], "killed (astoria.common.code_status.codestatus attribute)": [[14, "astoria.common.code_status.CodeStatus.KILLED"]], "processmanager (class in astoria.astprocd)": [[14, "astoria.astprocd.ProcessManager"]], "processmanagermessage (class in astoria.common.ipc)": [[14, "astoria.common.ipc.ProcessManagerMessage"]], "running (astoria.common.code_status.codestatus attribute)": [[14, "astoria.common.code_status.CodeStatus.RUNNING"]], "starting (astoria.common.code_status.codestatus attribute)": [[14, "astoria.common.code_status.CodeStatus.STARTING"]], "code_status (astoria.common.ipc.processmanagermessage attribute)": [[14, "astoria.common.ipc.ProcessManagerMessage.code_status"]], "dependencies (astoria.astprocd.processmanager attribute)": [[14, "astoria.astprocd.ProcessManager.dependencies"]], "disk_info (astoria.common.ipc.processmanagermessage attribute)": [[14, "astoria.common.ipc.ProcessManagerMessage.disk_info"]], "handle_astmetad_message() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.handle_astmetad_message"]], "handle_disk_insertion() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.handle_disk_insertion"]], "handle_disk_removal() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.handle_disk_removal"]], "handle_kill_request() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.handle_kill_request"]], "handle_restart_request() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.handle_restart_request"]], "main() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.main"]], "name (astoria.astprocd.processmanager attribute)": [[14, "astoria.astprocd.ProcessManager.name"]], "offline_status (astoria.astprocd.processmanager property)": [[14, "astoria.astprocd.ProcessManager.offline_status"]], "pid (astoria.common.ipc.processmanagermessage attribute)": [[14, "astoria.common.ipc.ProcessManagerMessage.pid"]], "update_status() (astoria.astprocd.processmanager method)": [[14, "astoria.astprocd.ProcessManager.update_status"]], "hostapd_binary (astoria.astwifid.wifihotspotlifecycle attribute)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.HOSTAPD_BINARY"]], "wifihotspotlifecycle (class in astoria.astwifid)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle"]], "wifimanagermessage (class in astoria.common.ipc)": [[15, "astoria.common.ipc.WiFiManagerMessage"]], "__init__() (astoria.astwifid.wifihotspotlifecycle method)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.__init__"]], "generate_hostapd_config() (astoria.astwifid.wifihotspotlifecycle method)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.generate_hostapd_config"]], "has_metadata_changed() (astoria.astwifid.wifihotspotlifecycle method)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.has_metadata_changed"]], "hotspot_running (astoria.common.ipc.wifimanagermessage attribute)": [[15, "astoria.common.ipc.WiFiManagerMessage.hotspot_running"]], "run_hotspot() (astoria.astwifid.wifihotspotlifecycle method)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.run_hotspot"]], "stop_hotspot() (astoria.astwifid.wifihotspotlifecycle method)": [[15, "astoria.astwifid.WiFiHotspotLifeCycle.stop_hotspot"]]}})