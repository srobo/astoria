<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Development &mdash; Astoria 0.8.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Implementation" href="../implementation/index.html" />
    <link rel="prev" title="Usage" href="../usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Astoria
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up">Setting Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linting">Linting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#static-type-checking">Static Type Checking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-in-docker">Running in Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/index.html">Implementation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Astoria</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Development</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/development/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this headline"></a></h1>
<p>Astoria is developed on <a class="reference external" href="https://github.com/srobo/astoria">GitHub</a> and pull requests should be submitted there. If you have write access to the repository,
you optionally can develop your changes on a branch within the main repository. Alternatively, please fork the Astoria
repository and pull request from there.</p>
<p>If you are working on something that has an existing issue open on the Astoria repository, please ensure that you assign
the issue to yourself such that duplication of work does not accidentally occur.</p>
<p>If you need help with Git, there are some good tutorial resources here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://rogerdudler.github.io/git-guide/">Git - The Simple Guide</a></p></li>
<li><p><a class="reference external" href="https://try.github.io/">GitHub - Learning Git</a></p></li>
<li><p><a class="reference external" href="https://www.atlassian.com/git">Atlassian Git Tutorial</a></p></li>
</ul>
<section id="setting-up">
<h2>Setting Up<a class="headerlink" href="#setting-up" title="Permalink to this headline"></a></h2>
<p>You will need the following installed on your machine:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/">Python</a> 3.6 or higher</p></li>
<li><p>python3-pip (for package management)</p></li>
<li><p>GNU Make</p></li>
<li><p><a class="reference external" href="https://poetry.eustace.io/">poetry</a></p></li>
<li><p>Optionally: Udisks2, Udiskie and DBus for astdiskd</p></li>
<li><p>Optionally: Mosquitto MQTT broker, although a public broker can also be used. A local broker is required for tests.</p></li>
<li><p>Optionally: graphviz, required for building the Sphinx documentation</p></li>
</ul>
<p>Now clone the repository from <a class="reference external" href="https://github.com/srobo/astoria">GitHub</a> into a folder on your local machine.</p>
<p>Inside that folder, we need to tell <cite>poetry</cite> to install the dev dependencies: <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span></code></p>
<p>You can now enter the virtual environment using <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">shell</span></code> and develop using your IDE of choice.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline"></a></h2>
<p>All code must be statically typed, linted and covered in unit tests.</p>
<p>Integration testing is currently performed manually.</p>
<p>You can run all of the required tests with one command: <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
<section id="unit-testing">
<h3>Unit Testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline"></a></h3>
<p>We use <cite>pytest</cite> and <cite>coverage.py</cite> to do our unit testing.</p>
<p>Execute the test suite: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code></p>
<p>If you wish to view the <cite>HTML</cite> output from <cite>coverage.py</cite> to help you find statements that are not covered by unit tests,
you can run the test suite in <cite>html-cov</cite> mode.</p>
<p>Execute the test suite in <cite>html-cov</cite> mode: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test-cov</span></code></p>
</section>
<section id="linting">
<h3>Linting<a class="headerlink" href="#linting" title="Permalink to this headline"></a></h3>
<p>We use <cite>flake8</cite> and a number of extensions to ensure that our code meets the <cite>PEP 8</cite> standards.</p>
<p>Execute the linter: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code></p>
</section>
<section id="static-type-checking">
<h3>Static Type Checking<a class="headerlink" href="#static-type-checking" title="Permalink to this headline"></a></h3>
<p>We use <cite>mypy</cite> to statically type check our code.</p>
<p>Execute Type Checking: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">type</span></code></p>
</section>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline"></a></h2>
<p>We are using <cite>Sphinx</cite> to generate documentation for the project.</p>
<p>All documentation can be found in the <code class="docutils literal notranslate"><span class="pre">docs/</span></code> folder.</p>
<p>Generate HTML Documentation: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs</span></code></p>
<p>Generate HTML Docs and serve locally: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-serve</span></code></p>
</section>
<section id="running-in-docker">
<h2>Running in Docker<a class="headerlink" href="#running-in-docker" title="Permalink to this headline"></a></h2>
<p>The repository includes a <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> and <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> that can be used to operate Astoria for development.</p>
<p>This is helpful for testing and developing applications that interface with Astoria.</p>
<p>Run Astoria in Docker: <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">-f</span> <span class="pre">docker-compose.yml</span> <span class="pre">up</span> <span class="pre">--build</span></code></p>
<p>The MQTT broker will be exposed to your host on port <code class="docutils literal notranslate"><span class="pre">1883</span></code> and <code class="docutils literal notranslate"><span class="pre">9001</span></code> (websockets).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../implementation/index.html" class="btn btn-neutral float-right" title="Implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-21, Dan Trickey.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>